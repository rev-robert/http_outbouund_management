<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sysevent_script_action">
    <sysevent_script_action action="INSERT_OR_UPDATE">
        <active>true</active>
        <condition_script/>
        <description/>
        <event_name>x_12232_http_mgmt.http_outbound.failure</event_name>
        <name>handleHTTPOutboundFailureEvent</name>
        <order>100</order>
        <script><![CDATA[handleEvent();

function handleEvent() {
	var intEventCountThreshold = gs.getProperty('x_12232_http_mgmt.http_outbound.failure.count');
	var intEventTimeThreshold = gs.getProperty('x_12232_http_mgmt.http_outbound.failure.threshold.time');
	var boolIgnoreEvent = false;
	var util = new x_12232_http_mgmt.utilHTTPOutboundManagement(current);
	var grPreviousEvent = util.getPreviousEvent(event);
	if (grPreviousEvent.next()) {
		var gdtEventCurrent = new GlideDateTime(event.sys_created_on.getDisplayValue());
		var gdtEventPrevious = newGlideDateTime(grPreviousEvent.sys_created_on.getDisplayValue());
		var durSincePreviousEvent = GlideDateTime.subtract(gdtEventPrevious, gdtEventCurrent);
		if (durSincePreviousEvent < intEventTimeThreshold) {
			boolIgnoreEvent = true;
		}  // if (durSincePreviousEvent > intEventTimeThreshold)
	}  // if (grPreviousEvent.next())
	if (!boolIgnoreEvent) {
		var sidMessage = '';
		var grRESTMessageFunction = util.getRESTFunction(current.url.toString());
		if (grRESTMessageFunction.next()) {
			sidMessage = grRESTMessageFunction.rest_message.toString();
		}  // if (grRESTMessageFunction.next())
		else {
			var grSOAPMessageFunction = util.getSOAPFunction(current.url.toString());
			if (grSOAPMessageFunction.next()) {
				sidMessage = grSOAPMessageFunction.soap_message.toString();
			}  // if (grSOAPMessageFunction.next())
		}  // else if (grRESTMessageFunction.next())
		if (sidMessage != '') {
			var grMessageSupport = util.getMessageSupport(sidMessage);
		}  // if (sidMessage != '')
	}  // if (!boolIgnoreEvent)
}]]></script>
        <synchronous>false</synchronous>
        <sys_class_name>sysevent_script_action</sys_class_name>
        <sys_created_by>robert.polickoski</sys_created_by>
        <sys_created_on>2019-05-18 20:19:56</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_domain_path>/</sys_domain_path>
        <sys_id>cf4e613cdbe1f3001b5cf7fdbf961978</sys_id>
        <sys_mod_count>4</sys_mod_count>
        <sys_name>handleHTTPOutboundFailureEvent</sys_name>
        <sys_overrides/>
        <sys_package display_value="HTTP_Outbound_Management" source="x_12232_http_mgmt">4669c39cdba1b3001b5cf7fdbf9619da</sys_package>
        <sys_policy/>
        <sys_scope display_value="HTTP_Outbound_Management">4669c39cdba1b3001b5cf7fdbf9619da</sys_scope>
        <sys_update_name>sysevent_script_action_cf4e613cdbe1f3001b5cf7fdbf961978</sys_update_name>
        <sys_updated_by>robert.polickoski</sys_updated_by>
        <sys_updated_on>2019-05-19 15:10:42</sys_updated_on>
    </sysevent_script_action>
</record_update>
